{% if path %}
<span class="folder"><a href="{{ url_for('repo_content', owner=owner, repo_name=repo_name, path='') }}">Root</a></span>
{% for current_path, part in current_paths %}
/ <span class="folder"><a href="{{ url_for('repo_content', owner=owner, repo_name=repo_name, path=current_path) }}">{{
        part
        }}</a></span>
{% endfor %}
{% endif %}

<!-- Fil- och mappstruktur -->
{% set delimiter = '' %}
{% if path %}
{% set delimiter = '/' %}
{% endif %}
<ul class="file-list">
    {% for dir in dirs %}
    <li class="folder">
        <span class="file-type folder-icon"></span>
        <a href="{{ url_for('repo_content', owner=owner, repo_name=repo_name, path=path + delimiter + dir['name']) }}">{{
            dir['name'] }}</a>
    </li>
    {% endfor %}
    {% for file in files %}
    <li>
        <span class="file-type file-icon"></span>
        <a href="#" class="edit-file-link" data-filepath="{{ path + '/' + file['name'] }}">{{ file['name']
            }}</a>
    </li>
    {% endfor %}
</ul>

<!-- Modal för att redigera filer -->
<div id="editFileModal" class="modal">
    <div class="modal-content">
        <h2>Redigera fil <span id="filepathlabel"></span></h2>
        <form id="editFileForm" action="{{ url_for('edit_file', repo_name=repo_name) }}" method="post">
            <input type="hidden" name="path" id="editFilePath">
            <input type="hidden" name="owner" value="{{ owner }}">
            <textarea name="content" id="editFileContent"></textarea>
            <br>
            <button type="submit">Spara ändringar</button>
            <button type="button" class="close-btn" id="closeEditModal">Avbryt</button>
        </form>
    </div>
</div>

<!-- Modal för att skapa ny mapp -->
<div id="createFolderModal" class="modal">
    <div class="modal-content">
        <h2>Skapa ny mapp</h2>
        <form id="createFolderForm" action="{{ url_for('create_folder', repo_name=repo_name) }}" method="post">
            <input type="hidden" name="path" value="{{ path }}">
            <input type="hidden" name="owner" value="{{ owner }}">
            <input type="text" name="folder_name" placeholder="Ny mappnamn" required>
            <br>
            <button type="submit">Skapa mapp</button>
            <button type="button" class="close-btn" id="closeCreateModal">Avbryt</button>
        </form>
    </div>
</div>

<!-- Modal för att ladda upp fil -->
<div id="uploadFileModal" class="modal">
    <div class="modal-content">
        <h2>Ladda upp fil</h2>
        <form id="uploadFileForm" action="{{ url_for('upload_file', repo_name=repo_name) }}" method="post"
            enctype="multipart/form-data">
            <input type="hidden" name="path" value="{{ path }}">
            <input type="hidden" name="owner" value="{{ owner }}">
            <input type="file" name="file" required>
            <br>
            <button type="submit">Ladda upp</button>
            <button type="button" class="close-btn" id="closeUploadModal">Avbryt</button>
        </form>
    </div>
</div>